{% extends "base.html" %}

{% block content %}
<div class="holocron-box" style="max-width: 1100px; margin: 0 auto;">

    <h2 style="margin-bottom: 10px; color: var(--blue-dark);">
        Cartões disponíveis
    </h2>

    <p style="margin-bottom: 30px;">
        <strong>Crédito aprovado disponível:</strong>
        R$ {{ credito_aprovado }}
    </p>

    {% if cartoes_disponiveis %}
    <div class="cartoes-container">
        {% for cartao in cartoes_disponiveis %}
        <div class="cartao
            {% if cartao.tipo == 'debito' %}debito
            {% elif 'Gold' in cartao.nome %}gold
            {% elif 'Black' in cartao.nome %}black
            {% elif 'Silver' in cartao.nome %}silver
            {% else %}blue{% endif %}
        ">

            <span class="tipo">
                {{ cartao.get_tipo_display }}
            </span>

            <h3>{{ cartao.nome }}</h3>

            <p style="font-size: 14px; opacity: .9;">
                {{ cartao.vantagens }}
            </p>

            {% if cartao.tipo == "credito" %}
            <p style="margin-top: 10px; font-size: 14px;">
                <strong>Limite:</strong>
                R$ {{ cartao.limite_minimo }} – R$ {{ cartao.limite_maximo }}
            </p>
            {% endif %}

            <a href="{% url 'solicitar_cartao' cartao.id %}"
               style="
                   display: inline-block;
                   margin-top: 15px;
                   padding: 8px 14px;
                   background: rgba(255,255,255,0.25);
                   color: inherit;
                   border-radius: 6px;
                   text-decoration: none;
                   font-weight: 600;
               ">
                Solicitar cartão
            </a>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if cartoes_indisponiveis %}
    <hr style="margin: 40px 0;">

    <h3 style="margin-bottom: 20px; color: var(--blue-dark);">
        Cartões indisponíveis
    </h3>

    <div class="cartoes-container">
        {% for cartao in cartoes_indisponiveis %}
        <div class="cartao"
             style="
                background: #f5f5f5;
                color: #777;
                box-shadow: none;
             ">

            <span class="tipo" style="background:#ddd;color:#555;">
                {{ cartao.get_tipo_display }}
            </span>

            <h3>{{ cartao.nome }}</h3>

            <p style="font-size:14px;">
                {{ cartao.vantagens }}
            </p>

            <p style="margin-top:10px;font-size:14px;">
                <strong>Crédito mínimo exigido:</strong>
                R$ {{ cartao.limite_minimo }}
            </p>

            <em>Crédito insuficiente para solicitar este cartão.</em>
        </div>
        {% endfor %}
    </div>
    {% endif %}

</div>
{% endblock %}
