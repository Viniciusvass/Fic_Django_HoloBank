{% extends "base.html" %}

{% block content %}
<div class="holocron-box">
    <h1>Bem-vindo, {{ usuario.nome }}!</h1>
    <p>CPF: {{ usuario.cpf }}</p>
    <p>Telefone: {{ usuario.telefone }}</p>
    <p>Email: {{ usuario.email }}</p>
</div>

<div class="holocron-box" style="margin-top: 20px;">
    <h2>Resumo das Contas</h2>
    <p>Total de contas: {{ contas|length }}</p>
    <p>Saldo total: R$ {{ saldo_total }}</p>

    <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
        <thead>
            <tr style="background-color: var(--blue-holocron); color: white;">
                <th style="padding: 8px; text-align: left;">N√∫mero da Conta</th>
                <th style="padding: 8px; text-align: left;">Tipo</th>
                <th style="padding: 8px; text-align: left;">Saldo</th>
                <th style="padding: 8px; text-align: left;">Status</th>
                <th style="padding: 8px; text-align: left;">Data de Abertura</th>
            </tr>
        </thead>
        <tbody>
            {% for conta in contas %}
            <tr style="border-bottom: 1px solid var(--gray-soft);">
                <td style="padding: 8px;">{{ conta.numero_conta }}</td>
                <td style="padding: 8px;">{{ conta.get_tipo_conta_display }}</td>
                <td style="padding: 8px;">R$ {{ conta.saldo }}</td>
                <td style="padding: 8px;">{{ conta.get_status_conta_display }}</td>
                <td style="padding: 8px;">{{ conta.data_abertura }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" style="padding: 8px; text-align: center;">Nenhuma conta encontrada.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- üåü RESUMO DE CR√âDITO (NOVO) -->
<div class="holocron-box" style="margin-top: 20px;">
    <h2>Resumo de Cr√©ditos</h2>

    <p><strong>Total de solicita√ß√µes:</strong> {{ credito_total }}</p>

    <p>
        <strong>Status:</strong> 
        <span style="color: green;">Aprovados: {{ credito_aprovado }}</span> ‚Ä¢
        <span style="color: orange;">Pendentes: {{ credito_pendente }}</span> ‚Ä¢
        <span style="color: red;">Rejeitados: {{ credito_rejeitado }}</span>
    </p>

    {% if credito_ultimo %}
        <p style="margin-top: 10px;">
            <strong>√öltimo cr√©dito solicitado:</strong><br>
            Valor: R$ {{ credito_ultimo.valor_solicitado }} ‚Äî
            {% if credito_ultimo.status_credito == 'aprovado' %}
                <span style="color: green; font-weight: bold;">Aprovado</span>
            {% elif credito_ultimo.status_credito == 'rejeitado' %}
                <span style="color: red; font-weight: bold;">Rejeitado</span>
            {% else %}
                <span style="color: orange; font-weight: bold;">Pendente</span>
            {% endif %}
        </p>
    {% else %}
        <p style="margin-top: 10px;">Nenhum cr√©dito solicitado ainda.</p>
    {% endif %}
</div>

{% endblock %}
